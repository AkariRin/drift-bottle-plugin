# 漂流瓶

🌊 扔漂流瓶、捡漂流瓶，跨群传递消息的互动插件。让你的消息随波漂流，被不同群的人捡到！

## 触发命令

### 扔漂流瓶
群内发送 `扔漂流瓶[内容]` 将消息装入漂流瓶扔进大海

**示例：**
```
扔漂流瓶今天天气真好！
扔漂流瓶有人吗？交个朋友~
```

### 捡漂流瓶
群内发送 `捡漂流瓶` 从海中随机捡起一个漂流瓶

## 配置napcat

在napcat的网络配置中添加一个HTTP服务器：

1. 打开napcat的配置界面（WebUI或配置文件）
2. 在"网络配置"中点击"添加"，选择"HTTP服务器"
3. 配置以下参数：
   - **主机地址**: `0.0.0.0`（允许外部访问）或 `127.0.0.1`（仅本机访问）
   - **端口**: `3000`（与插件配置中的 `napcat.port` 保持一致）
   - **启用CORS**: ✅ 开启
   - **Token**: 留空（不设置鉴权）
4. 保存配置并重启napcat

> ⚠️ 注意：如果napcat和插件不在同一台机器上，请确保防火墙放行对应端口。

## 配置说明

插件配置文件位于 `config.toml`：

```toml
[plugin]
enabled = true                 # 是否启用插件
config_version = "1.0.0"       # 配置版本

[napcat]
address = "napcat"             # napcat服务器连接地址
port = 3000                    # napcat服务器端口
```

## 使用示例

### 扔漂流瓶
```
用户: 扔漂流瓶艾斯比
Bot: 你将一个写着【艾斯比】的纸条塞入瓶中扔进大海，希望有人捞到吧~
```

### 捡漂流瓶
```
用户: 捡漂流瓶
Bot: 你在海边捡到了一个漂流瓶，瓶中的纸条上写着：
艾斯比
BY：用户名 (114514)
From：群名 (1919810)
```

### 没有漂流瓶时
```
用户: 捡漂流瓶
Bot: 大海里暂时没有漂流瓶，试试自己扔一个吧~
```

## 注意事项

- ⚠️ 该功能仅支持**群聊**环境，私聊无法使用
- 🌐 漂流瓶跨群共享，所有群都能捡到其他群扔的瓶子
- 📦 每个漂流瓶只能被捡一次，捡起后就从海中消失
- 💬 扔漂流瓶时内容不能为空

## 数据存储

插件数据存储在 `bottles.db` SQLite 数据库中
